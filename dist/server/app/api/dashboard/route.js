(()=>{var e={};e.id=707,e.ids=[707],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},7642:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>y,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>g});var r={};a.r(r),a.d(r,{GET:()=>c});var s=a(8797),o=a(42),n=a(8492),u=a(3524),i=a(9540);let l=new u.PrismaClient;async function c(e){let{searchParams:t}=new URL(e.url),a=t.get("type");try{let e=new Date;if(e.setHours(0,0,0,0),"sale_calcutlation"===a){let e=new Date;e.setHours(0,0,0,0);let t=await l.sales.aggregate({where:{category:"FEED",created_at:{gte:e}},_sum:{salesPrice:!0,quantity:!0}}),a=t._sum.salesPrice||0,r=t._sum.quantity||0,s=await l.sales.aggregate({where:{category:"MEDICINE",created_at:{gte:e}},_sum:{salesPrice:!0,quantity:!0}}),o=s._sum.salesPrice||0,n=s._sum.quantity||0,u=await l.sales.aggregate({where:{category:"GROCERY",created_at:{gte:e}},_sum:{salesPrice:!0,quantity:!0}}),c=u._sum.salesPrice||0,d=u._sum.quantity||0;return i.NextResponse.json({status:"ok",data:{feedSales:{totalAmount:a,totalQuantity:r},medicineSales:{totalAmount:o,totalQuantity:n},grocerySales:{totalAmount:c,totalQuantity:d}}})}if("available_cash"!==a)return i.NextResponse.json({status:400,error:"Invalid type parameter"});try{let t=(await l.sales.aggregate({where:{created_at:{gte:e}},_sum:{salesPrice:!0}}))._sum.salesPrice||0,a=(await l.expneses.aggregate({where:{created_at:{gte:e}},_sum:{amount:!0}}))._sum.amount||0,r=(await l.collectPayment.aggregate({where:{created_at:{gte:e}},_sum:{amount:!0}}))._sum.amount||0;return i.NextResponse.json({status:"ok",availableCash:t-a,totalSalesAmount:t,totalExpensesAmount:a,totalCollectedAmount:r})}catch(e){return console.error(e.message),i.NextResponse.json({error:e.message})}}catch(e){return console.error("Failed to get total sales amount for today:",e.message),i.NextResponse.json({status:500,error:"Failed to get total sales amount for today"})}}let d=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/dashboard/route",pathname:"/api/dashboard",filename:"route",bundlePath:"app/api/dashboard/route"},resolvedPagePath:"H:\\Apps-key\\milon-store-sharif-backend\\src\\app\\api\\dashboard\\route.js",nextConfigOutput:"",userland:r}),{workAsyncStorage:p,workUnitAsyncStorage:g,serverHooks:m}=d;function y(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:g})}},8031:()=>{},5303:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[492,661],()=>a(7642));module.exports=r})();